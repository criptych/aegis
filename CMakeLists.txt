CMAKE_MINIMUM_REQUIRED(VERSION 2.8)

PROJECT(AEGIS CXX)

IF(NOT CMAKE_BUILD_TYPE)
    SET(CMAKE_BUILD_TYPE "Release")
ENDIF()

IF(CMAKE_COMPILER_IS_GNUCXX)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")
    SET(CMAKE_CXX_FLAGS_DEBUG "-g -Wall -Werror -O0")
    SET(CMAKE_CXX_FLAGS_RELEASE "-Wall -O2")
    SET(CMAKE_CXX_FLAGS_RELWITHDEBINFO "-g -Wall -O2")
ENDIF()

#FIND_PACKAGE(sqlite3 REQUIRED QUIET)
FIND_PACKAGE(Lua51 REQUIRED QUIET)

INCLUDE_DIRECTORIES(
    ${CMAKE_CURRENT_SOURCE_DIR}/include/
#    ${SQLITE_INCLUDE_DIRS}
    ${LUA_INCLUDE_DIR}
)

LINK_LIBRARIES(
#    ${SQLITE_LIBRARIES}
    ${LUA_LIBRARIES}
)

#~ ADD_EXECUTABLE(aegis
    #~ src/aegis.cpp
#~ )

ADD_EXECUTABLE(aegis-test
    src/testmain.cpp
    src/tests.cpp
    src/aegis.cpp
)

ENABLE_TESTING()
ADD_TEST(NAME builtin COMMAND aegis-test)
